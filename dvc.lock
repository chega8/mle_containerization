schema: '2.0'
stages:
  prepare:
    cmd: ./src/scripts/prepare.sh
    deps:
    - path: data/train_sample.csv
      md5: 728ac1ea5b92660fa0d823cf6f5c742d
      size: 233124604
    - path: src/prepare.py
      md5: 766923fb803898cfa1e01869b0427558
      size: 2040
    params:
      params.yaml:
        prepare.seed: 20170428
    outs:
    - path: data/prepared
      md5: 5e6d4a54eb20f3f36ccd04dd8c4079ef.dir
      size: 183979748
      nfiles: 2
  featurize:
    cmd: ./src/scripts/featurize.sh
    deps:
    - path: data/prepared
      md5: 5e6d4a54eb20f3f36ccd04dd8c4079ef.dir
      size: 183979748
      nfiles: 2
    - path: src/featurize.py
      md5: 73337a677c3055c5f1f8acdd30e70700
      size: 3310
    params:
      params.yaml:
        featurize.max_features: 204
    outs:
    - path: data/features
      md5: 555a31e38707f1ba6b634db34a739947.dir
      size: 82006002
      nfiles: 5
  train:
    cmd: ./src/scripts/train.sh
    deps:
    - path: data/features
      md5: 555a31e38707f1ba6b634db34a739947.dir
      size: 82006002
      nfiles: 5
    - path: src/train.py
      md5: ec98f02dda339ddbf540e200686c1e47
      size: 2758
    params:
      params.yaml:
        train.model: logreg
        train.seed: 421
    outs:
    - path: data/models
      md5: d6cb58dcbb80ce241785ab3acbe81e47.dir
      size: 2335
      nfiles: 1
  evaluate:
    cmd: ./src/scripts/evaluate.sh
    deps:
    - path: data/features
      md5: 555a31e38707f1ba6b634db34a739947.dir
      size: 82006002
      nfiles: 5
    - path: data/models/model.pkl
      md5: 66e50fe5276a8beb26f759ef4c74ac7a
      size: 2335
    - path: src/evaluate.py
      md5: c1316442dbb258cf724fb1bbd1beeb9b
      size: 2008
    outs:
    - path: evaluation/plots/metrics/avg_prec.tsv
      md5: d2dc1a7fa5d86facf0a67b58b83503af
      size: 35
    - path: evaluation/plots/metrics/roc_auc.tsv
      md5: c659bb1bc87085c08ff59c17bc294027
      size: 34
    - path: evaluation/plots/sklearn/confusion_matrix.json
      md5: b8262218d24502b3ce6b250b0714b0e2
      size: 1260002
    - path: evaluation/plots/sklearn/precision_recall.json
      md5: 13b14879ebdf5dcbc5e69b3089229327
      size: 3044117
    - path: evaluation/plots/sklearn/roc.json
      md5: 724fdf6ad00b8504c4db1f058429bf70
      size: 1160294
